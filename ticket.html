<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è½¦ç¥¨é¢„è®¢ - èµ›åšæ™ºèƒ½æœåŠ¡</title>
    <style>
        :root {
            --bg-dark: #0a0a14;
            --bg-card: #121225;
            --neon-blue: #0ff0fc;
            --neon-pink: #ff00ff;
            --neon-purple: #8a2be2;
            --text-light: #e0e0ff;
            --grid-color: rgba(10, 200, 255, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: var(--bg-dark);
            color: var(--text-light);
            min-height: 100vh;
            background-image: 
                linear-gradient(var(--grid-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
            background-size: 30px 30px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 40px 0;
            margin-bottom: 40px;
            position: relative;
        }
        
        h1 {
            font-size: 3.5rem;
            text-transform: uppercase;
            letter-spacing: 4px;
            margin-bottom: 15px;
            text-shadow: 0 0 10px var(--neon-blue), 0 0 20px var(--neon-blue);
            color: var(--neon-blue);
            animation: glitch 3s infinite;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: var(--neon-pink);
            text-shadow: 0 0 5px var(--neon-pink);
            margin-bottom: 10px;
        }
        
        .section-title {
            font-size: 2rem;
            color: var(--neon-blue);
            text-align: center;
            margin: 60px 0 30px 0;
            text-shadow: 0 0 10px var(--neon-blue);
        }
        
        .search-form {
            background-color: var(--bg-card);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 40px;
            border: 1px solid rgba(10, 200, 255, 0.3);
            box-shadow: 0 0 20px rgba(10, 200, 255, 0.1);
        }
        
        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            flex: 1;
            min-width: 200px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--neon-blue);
            font-size: 0.9rem;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            background-color: rgba(10, 10, 20, 0.7);
            border: 1px solid rgba(10, 200, 255, 0.3);
            border-radius: 6px;
            color: var(--text-light);
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--neon-blue);
            box-shadow: 0 0 10px rgba(10, 200, 255, 0.3);
        }
        
        .btn {
            display: inline-block;
            padding: 12px 30px;
            background: rgba(10, 200, 255, 0.2);
            border: 1px solid var(--neon-blue);
            border-radius: 25px;
            color: var(--neon-blue);
            text-decoration: none;
            transition: all 0.3s;
            font-size: 1rem;
            cursor: pointer;
            text-align: center;
        }
        
        .btn:hover {
            background: var(--neon-blue);
            color: var(--bg-dark);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .btn-disabled:hover {
            background: rgba(10, 200, 255, 0.2);
            color: var(--neon-blue);
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--neon-blue);
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }
        
        .message {
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .message.success {
            background-color: rgba(0, 255, 157, 0.1);
            border: 1px solid rgba(0, 255, 157, 0.3);
            color: #00ff9d;
        }
        
        .message.error {
            background-color: rgba(255, 0, 0, 0.1);
            border: 1px solid rgba(255, 0, 0, 0.3);
            color: #ff5555;
        }
        
        .message.info {
            background-color: rgba(10, 200, 255, 0.1);
            border: 1px solid rgba(10, 200, 255, 0.3);
            color: var(--neon-blue);
        }
        
        .ticket-list {
            display: grid;
            gap: 20px;
            margin-top: 30px;
        }
        
        .ticket-card {
            background-color: var(--bg-card);
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
            border: 1px solid rgba(10, 200, 255, 0.3);
            box-shadow: 0 0 20px rgba(10, 200, 255, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .ticket-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: 0.5s;
        }
        
        .ticket-card:hover::before {
            left: 100%;
        }
        
        .ticket-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(10, 200, 255, 0.3);
            border-color: var(--neon-blue);
        }
        
        .ticket-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(10, 200, 255, 0.2);
        }
        
        .ticket-route {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .route-station {
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .route-arrow {
            color: var(--neon-pink);
            font-size: 1.5rem;
        }
        
        .ticket-price {
            font-size: 1.5rem;
            color: var(--neon-blue);
            text-shadow: 0 0 5px var(--neon-blue);
        }
        
        .ticket-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .detail-item {
            display: flex;
            flex-direction: column;
        }
        
        .detail-label {
            font-size: 0.8rem;
            color: #a0a0c0;
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-size: 1rem;
            color: var(--text-light);
        }
        
        .ticket-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }
        
        /* é€‰åº§ä½æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--bg-card);
            border: 2px solid var(--neon-blue);
            border-radius: 12px;
            padding: 30px;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            box-shadow: 0 0 50px rgba(10, 200, 255, 0.3);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(10, 200, 255, 0.3);
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: var(--neon-blue);
            text-shadow: 0 0 10px var(--neon-blue);
        }
        
        .close-btn {
            background: none;
            border: none;
            color: var(--neon-pink);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
        }
        
        /* é£æœºåº§ä½å›¾ */
        .airplane-layout {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .airplane-body {
            width: 400px;
            height: 200px;
            background: linear-gradient(135deg, #2a2a4a, #1a1a3a);
            border: 2px solid var(--neon-blue);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .airplane-cockpit {
            position: absolute;
            left: -30px;
            top: 50%;
            transform: translateY(-50%);
            width: 60px;
            height: 80px;
            background: #333355;
            border-radius: 50%;
            border: 2px solid var(--neon-blue);
        }
        
        .airplane-tail {
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 60px;
            background: #333355;
            border-radius: 10px;
            border: 2px solid var(--neon-blue);
        }
        
        .seats-container {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            padding: 20px;
        }
        
        .seat-row {
            display: contents;
        }
        
        .seat {
            width: 40px;
            height: 40px;
            background: #2a2a4a;
            border: 1px solid var(--neon-blue);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.8rem;
        }
        
        .seat:hover {
            background: rgba(10, 200, 255, 0.3);
            transform: scale(1.1);
        }
        
        .seat.selected {
            background: var(--neon-blue);
            color: var(--bg-dark);
            box-shadow: 0 0 10px var(--neon-blue);
        }
        
        .seat.occupied {
            background: #ff5555;
            border-color: #ff5555;
            cursor: not-allowed;
        }
        
        .aisle {
            grid-column: 3 / 5;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--neon-pink);
            font-weight: bold;
        }
        
        /* ç«è½¦åº§ä½å›¾ */
        .train-layout {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }
        
        .train-carriage {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .carriage-number {
            width: 60px;
            text-align: center;
            color: var(--neon-pink);
            font-weight: bold;
        }
        
        .carriage-seats {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 8px;
            flex: 1;
        }
        
        .train-seat {
            width: 35px;
            height: 35px;
            background: #2a2a4a;
            border: 1px solid var(--neon-blue);
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.7rem;
        }
        
        .train-seat:hover {
            background: rgba(10, 200, 255, 0.3);
        }
        
        .train-seat.selected {
            background: var(--neon-blue);
            color: var(--bg-dark);
        }
        
        /* æ±½è½¦åº§ä½å›¾ */
        .bus-layout {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }
        
        .bus-driver {
            width: 60px;
            height: 60px;
            background: #333355;
            border: 2px solid var(--neon-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            color: var(--neon-blue);
        }
        
        .bus-seats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
        
        .bus-seat {
            width: 45px;
            height: 45px;
            background: #2a2a4a;
            border: 1px solid var(--neon-blue);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .bus-seat:hover {
            background: rgba(10, 200, 255, 0.3);
        }
        
        .bus-seat.selected {
            background: var(--neon-blue);
            color: var(--bg-dark);
        }
        
        /* å¤§å±æŸ¥è¯¢æ ·å¼ */
        .screen-query {
            margin-top: 40px;
        }
        
        .screen-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .screen-results {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(10, 200, 255, 0.3);
            min-height: 300px;
        }
        
        .flight-board, .train-board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .board-item {
            background: rgba(10, 10, 20, 0.7);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(10, 200, 255, 0.2);
        }
        
        .board-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(10, 200, 255, 0.2);
        }
        
        .flight-number, .train-number {
            color: var(--neon-blue);
            font-weight: bold;
        }
        
        .status {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
        }
        
        .status.on-time {
            background: rgba(0, 255, 157, 0.2);
            color: #00ff9d;
        }
        
        .status.delayed {
            background: rgba(255, 170, 0, 0.2);
            color: #ffaa00;
        }
        
        .status.cancelled {
            background: rgba(255, 85, 85, 0.2);
            color: #ff5555;
        }
        
        .home-link {
            display: inline-block;
            margin-top: 40px;
            padding: 10px 25px;
            background: rgba(10, 200, 255, 0.1);
            border: 1px solid var(--neon-blue);
            border-radius: 25px;
            color: var(--neon-blue);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .home-link:hover {
            background: var(--neon-blue);
            color: var(--bg-dark);
        }
        
        footer {
            text-align: center;
            margin-top: 80px;
            padding: 30px;
            color: #707090;
            font-size: 0.9rem;
            border-top: 1px solid rgba(10, 200, 255, 0.2);
        }
        
        @keyframes glitch {
            0% { transform: translate(0); }
            2% { transform: translate(-2px, 2px); }
            4% { transform: translate(-2px, -2px); }
            6% { transform: translate(2px, 2px); }
            8% { transform: translate(2px, -2px); }
            10% { transform: translate(0); }
            100% { transform: translate(0); }
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            
            .ticket-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .ticket-actions {
                justify-content: stretch;
            }
            
            .btn {
                flex: 1;
            }
            
            .airplane-body {
                width: 300px;
            }
            
            .seats-container {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .screen-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .form-group {
                min-width: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>è½¦ç¥¨é¢„è®¢</h1>
            <p class="subtitle">æ™ºèƒ½å‡ºè¡Œï¼Œè½»æ¾é¢„è®¢</p>
            <p>ç«è½¦ã€é£æœºã€æ±½è½¦ç¥¨ä¸€ç«™å¼é¢„è®¢æœåŠ¡</p>
        </header>
        
        <!-- è½¦ç¥¨é¢„è®¢éƒ¨åˆ† -->
        <h2 class="section-title">ğŸš• è½¦ç¥¨é¢„è®¢</h2>
        <div class="search-form">
            <div id="messageArea"></div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="departure">å‡ºå‘åœ°</label>
                    <input type="text" id="departure" class="form-control" placeholder="ä¾‹å¦‚: åŒ—äº¬">
                </div>
                <div class="form-group">
                    <label for="destination">ç›®çš„åœ°</label>
                    <input type="text" id="destination" class="form-control" placeholder="ä¾‹å¦‚: ä¸Šæµ·">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="depart-date">å‡ºå‘æ—¥æœŸ</label>
                    <input type="date" id="depart-date" class="form-control">
                </div>
                <div class="form-group">
                    <label for="ticket-type">ç¥¨ç§</label>
                    <select id="ticket-type" class="form-control">
                        <option value="train">ç«è½¦ç¥¨</option>
                        <option value="flight">é£æœºç¥¨</option>
                        <option value="bus">æ±½è½¦ç¥¨</option>
                    </select>
                </div>
            </div>
            
            <button id="searchBtn" class="btn btn-block" onclick="searchTickets()">æœç´¢è½¦ç¥¨</button>
        </div>
        
        <div class="ticket-list" id="ticketList">
            <!-- è½¦ç¥¨åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
        </div>

        <!-- å¤§å±æŸ¥è¯¢éƒ¨åˆ† -->
        <h2 class="section-title">ğŸ“º æœºåœº/ç«è½¦ç«™å¤§å±æŸ¥è¯¢</h2>
        <div class="screen-query">
            <div class="screen-controls">
                <div class="form-group" style="min-width: 200px;">
                    <label for="city">åŸå¸‚</label>
                    <select id="city" class="form-control" onchange="loadStations()">
                        <option value="">è¯·é€‰æ‹©åŸå¸‚</option>
                        <option value="åŒ—äº¬">åŒ—äº¬å¸‚</option>
                        <option value="ä¸Šæµ·">ä¸Šæµ·å¸‚</option>
                        <option value="å¹¿å·">å¹¿å·å¸‚</option>
                        <option value="å¤©æ´¥">å¤©æ´¥å¸‚</option>
                        <option value="æ­¦æ±‰">æ­¦æ±‰å¸‚</option>
                    </select>
                </div>
                
                <div class="form-group" style="min-width: 200px;">
                    <label for="station-type">ç«™ç‚¹ç±»å‹</label>
                    <select id="station-type" class="form-control" onchange="loadStations()">
                        <option value="airport">æœºåœº</option>
                        <option value="train-station">ç«è½¦ç«™</option>
                    </select>
                </div>
                
                <div class="form-group" style="min-width: 200px;">
                    <label for="station">ç«™ç‚¹</label>
                    <select id="station" class="form-control" onchange="queryScreen()">
                        <option value="">è¯·é€‰æ‹©ç«™ç‚¹</option>
                    </select>
                </div>
            </div>
            
            <div class="screen-results" id="screenResults">
                <p style="text-align: center; color: #a0a0c0; line-height: 250px;">
                    è¯·é€‰æ‹©åŸå¸‚å’Œç«™ç‚¹ç±»å‹æŸ¥çœ‹å¤§å±ä¿¡æ¯
                </p>
            </div>
        </div>
        
        <!-- é€‰åº§ä½æ¨¡æ€æ¡† -->
        <div id="seatModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="modalTitle">é€‰æ‹©åº§ä½</h3>
                    <button class="close-btn" onclick="closeSeatModal()">Ã—</button>
                </div>
                <div id="seatLayout">
                    <!-- åº§ä½å¸ƒå±€å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="confirmSeatSelection()">ç¡®è®¤é€‰åº§</button>
                    <button class="btn" onclick="closeSeatModal()" style="margin-left: 10px; background: rgba(255, 0, 0, 0.2); border-color: #ff5555; color: #ff5555;">å–æ¶ˆ</button>
                </div>
            </div>
        </div>
        
        <a href="../index.html" class="home-link">è¿”å›é¦–é¡µ</a>
        
        <footer>
            <p>Â© 2023 èµ›åšæ™ºèƒ½æœåŠ¡ | æœªæ¥ç§‘æŠ€ï¼ŒæœåŠ¡ç”Ÿæ´»</p>
            <p style="margin-top: 10px; font-size: 0.8rem; color: #555580;">è½¦ç¥¨é¢„è®¢æœåŠ¡æ”¯æŒç«è½¦ã€é£æœºã€æ±½è½¦ç­‰å¤šç§å‡ºè¡Œæ–¹å¼</p>
        </footer>
    </div>

    <script>
        // é…ç½®ä¿¡æ¯
        const CT_CONFIG = {
            appKey: 'YOUR_APP_KEY',
            appSecurity: 'YOUR_APP_SECURITY',
            employeeID: 'YOUR_EMPLOYEE_ID'
        };

        // ç«™ç‚¹æ•°æ®ï¼ˆåªä¿ç•™åŒ—ä¸Šå¹¿å¤©æ´¥æ­¦æ±‰ï¼‰
        const CITY_STATIONS = {
            'åŒ—äº¬': {
                'airport': ['åŒ—äº¬é¦–éƒ½å›½é™…æœºåœº', 'åŒ—äº¬å¤§å…´å›½é™…æœºåœº'],
                'train-station': ['åŒ—äº¬ç«™', 'åŒ—äº¬è¥¿ç«™', 'åŒ—äº¬å—ç«™', 'åŒ—äº¬åŒ—ç«™']
            },
            'ä¸Šæµ·': {
                'airport': ['ä¸Šæµ·æµ¦ä¸œå›½é™…æœºåœº', 'ä¸Šæµ·è™¹æ¡¥å›½é™…æœºåœº'],
                'train-station': ['ä¸Šæµ·ç«™', 'ä¸Šæµ·è™¹æ¡¥ç«™', 'ä¸Šæµ·å—ç«™']
            },
            'å¹¿å·': {
                'airport': ['å¹¿å·ç™½äº‘å›½é™…æœºåœº'],
                'train-station': ['å¹¿å·ç«™', 'å¹¿å·å—ç«™', 'å¹¿å·ä¸œç«™']
            },
            'å¤©æ´¥': {
                'airport': ['å¤©æ´¥æ»¨æµ·å›½é™…æœºåœº'],
                'train-station': ['å¤©æ´¥ç«™', 'å¤©æ´¥è¥¿ç«™', 'å¤©æ´¥å—ç«™']
            },
            'æ­¦æ±‰': {
                'airport': ['æ­¦æ±‰å¤©æ²³å›½é™…æœºåœº'],
                'train-station': ['æ­¦æ±‰ç«™', 'æ±‰å£ç«™', 'æ­¦æ˜Œç«™']
            }
        };

        // å½“å‰é€‰ä¸­çš„åº§ä½
        let selectedSeat = null;
        let currentVehicleType = null;

        // é¡µé¢åŠ è½½åˆå§‹åŒ–
        window.addEventListener('load', function() {
            document.body.style.opacity = '0';
            document.body.style.transition = 'opacity 1s';
            
            setTimeout(function() {
                document.body.style.opacity = '1';
            }, 100);
            
            // è®¾ç½®é»˜è®¤æ—¥æœŸä¸ºæ˜å¤©
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const formattedDate = tomorrow.toISOString().split('T')[0];
            document.getElementById('depart-date').value = formattedDate;
        });

        // åŠ è½½ç«™ç‚¹æ•°æ®
        function loadStations() {
            const city = document.getElementById('city').value;
            const stationType = document.getElementById('station-type').value;
            const stationSelect = document.getElementById('station');
            
            stationSelect.innerHTML = '<option value="">è¯·é€‰æ‹©ç«™ç‚¹</option>';
            
            if (city && CITY_STATIONS[city] && CITY_STATIONS[city][stationType]) {
                CITY_STATIONS[city][stationType].forEach(station => {
                    const option = document.createElement('option');
                    option.value = station;
                    option.textContent = station;
                    stationSelect.appendChild(option);
                });
            }
        }

        // æŸ¥è¯¢å¤§å±ä¿¡æ¯
        function queryScreen() {
            const city = document.getElementById('city').value;
            const station = document.getElementById('station').value;
            const stationType = document.getElementById('station-type').value;
            
            if (!city || !station) {
                document.getElementById('screenResults').innerHTML = 
                    '<p style="text-align: center; color: #a0a0c0; line-height: 250px;">è¯·é€‰æ‹©åŸå¸‚å’Œç«™ç‚¹æŸ¥çœ‹å¤§å±ä¿¡æ¯</p>';
                return;
            }
            
            const results = document.getElementById('screenResults');
            results.innerHTML = '<div class="loading" style="margin: 20px auto;"></div><p style="text-align: center;">æ­£åœ¨æŸ¥è¯¢å¤§å±ä¿¡æ¯...</p>';
            
            setTimeout(() => {
                if (stationType === 'airport') {
                    displayFlightBoard(city, station);
                } else {
                    displayTrainBoard(city, station);
                }
            }, 1000);
        }

        // æ˜¾ç¤ºèˆªç­å¤§å±
        function displayFlightBoard(city, airport) {
            // ä¸ºä¸åŒåŸå¸‚ç”Ÿæˆä¸åŒçš„èˆªç­æ•°æ®
            const flightData = {
                'åŒ—äº¬': [
                    { number: 'CA1501', destination: 'ä¸Šæµ·è™¹æ¡¥', time: '10:20', status: 'on-time', gate: 'A12' },
                    { number: 'MU5101', destination: 'å¹¿å·ç™½äº‘', time: '11:45', status: 'delayed', gate: 'B05' },
                    { number: 'CZ3101', destination: 'æ·±åœ³å®å®‰', time: '13:20', status: 'on-time', gate: 'C08' },
                    { number: 'HU7801', destination: 'æˆéƒ½å¤©åºœ', time: '14:35', status: 'cancelled', gate: 'D15' }
                ],
                'ä¸Šæµ·': [
                    { number: 'FM9101', destination: 'åŒ—äº¬é¦–éƒ½', time: '08:30', status: 'on-time', gate: 'A01' },
                    { number: 'MU5301', destination: 'å¹¿å·ç™½äº‘', time: '09:45', status: 'on-time', gate: 'B12' },
                    { number: 'HO1071', destination: 'æ·±åœ³å®å®‰', time: '11:20', status: 'delayed', gate: 'C05' }
                ],
                'å¹¿å·': [
                    { number: 'CZ3101', destination: 'åŒ—äº¬é¦–éƒ½', time: '07:45', status: 'on-time', gate: 'A08' },
                    { number: 'CA1301', destination: 'ä¸Šæµ·æµ¦ä¸œ', time: '09:30', status: 'on-time', gate: 'B03' },
                    { number: 'MU5302', destination: 'æˆéƒ½å¤©åºœ', time: '12:15', status: 'delayed', gate: 'C12' }
                ],
                'å¤©æ´¥': [
                    { number: 'GS7890', destination: 'ä¸Šæµ·è™¹æ¡¥', time: '08:15', status: 'on-time', gate: 'A05' },
                    { number: 'CA2801', destination: 'å¹¿å·ç™½äº‘', time: '10:40', status: 'on-time', gate: 'B08' }
                ],
                'æ­¦æ±‰': [
                    { number: 'MU2451', destination: 'åŒ—äº¬å¤§å…´', time: '07:20', status: 'on-time', gate: 'A03' },
                    { number: 'CZ3345', destination: 'ä¸Šæµ·è™¹æ¡¥', time: '09:50', status: 'delayed', gate: 'B06' },
                    { number: 'HU7251', destination: 'å¹¿å·ç™½äº‘', time: '11:30', status: 'on-time', gate: 'C02' }
                ]
            };
            
            const mockFlights = flightData[city] || flightData['åŒ—äº¬'];
            const results = document.getElementById('screenResults');
            let html = `<h3 style="color: var(--neon-blue); margin-bottom: 20px; text-align: center;">${airport} - èˆªç­åŠ¨æ€</h3>`;
            html += '<div class="flight-board">';
            
            mockFlights.forEach(flight => {
                let statusText = '', statusClass = '';
                switch(flight.status) {
                    case 'on-time': statusText = 'å‡†æ—¶'; statusClass = 'on-time'; break;
                    case 'delayed': statusText = 'å»¶è¯¯'; statusClass = 'delayed'; break;
                    case 'cancelled': statusText = 'å–æ¶ˆ'; statusClass = 'cancelled'; break;
                }
                
                html += `
                    <div class="board-item">
                        <div class="board-header">
                            <span class="flight-number">${flight.number}</span>
                            <span class="status ${statusClass}">${statusText}</span>
                        </div>
                        <div>ç›®çš„åœ°: ${flight.destination}</div>
                        <div>è®¡åˆ’æ—¶é—´: ${flight.time}</div>
                        <div>ç™»æœºå£: ${flight.gate}</div>
                    </div>
                `;
            });
            
            html += '</div>';
            results.innerHTML = html;
        }

        // æ˜¾ç¤ºç«è½¦å¤§å±
        function displayTrainBoard(city, station) {
            // ä¸ºä¸åŒåŸå¸‚ç”Ÿæˆä¸åŒçš„ç«è½¦æ•°æ®
            const trainData = {
                'åŒ—äº¬': [
                    { number: 'G1', destination: 'ä¸Šæµ·è™¹æ¡¥', time: '09:00', status: 'on-time', platform: '1' },
                    { number: 'G67', destination: 'å¹¿å·å—', time: '10:30', status: 'on-time', platform: '2' },
                    { number: 'D21', destination: 'é•¿æ˜¥è¥¿', time: '12:15', status: 'delayed', platform: '3' }
                ],
                'ä¸Šæµ·': [
                    { number: 'G2', destination: 'åŒ—äº¬å—', time: '09:30', status: 'on-time', platform: '4' },
                    { number: 'G85', destination: 'å¹¿å·å—', time: '11:00', status: 'on-time', platform: '5' },
                    { number: 'D953', destination: 'å—äº¬å—', time: '13:45', status: 'on-time', platform: '6' }
                ],
                'å¹¿å·': [
                    { number: 'G66', destination: 'åŒ—äº¬è¥¿', time: '08:00', status: 'on-time', platform: '7' },
                    { number: 'G86', destination: 'ä¸Šæµ·è™¹æ¡¥', time: '10:15', status: 'delayed', platform: '8' },
                    { number: 'D362', destination: 'æ­¦æ±‰', time: '12:30', status: 'on-time', platform: '9' }
                ],
                'å¤©æ´¥': [
                    { number: 'G261', destination: 'ä¸Šæµ·è™¹æ¡¥', time: '08:45', status: 'on-time', platform: '10' },
                    { number: 'G292', destination: 'å¹¿å·å—', time: '11:20', status: 'on-time', platform: '11' }
                ],
                'æ­¦æ±‰': [
                    { number: 'G516', destination: 'åŒ—äº¬è¥¿', time: '07:30', status: 'on-time', platform: '12' },
                    { number: 'G1722', destination: 'ä¸Šæµ·è™¹æ¡¥', time: '09:45', status: 'on-time', platform: '13' },
                    { number: 'G1101', destination: 'å¹¿å·å—', time: '11:15', status: 'delayed', platform: '14' }
                ]
            };
            
            const mockTrains = trainData[city] || trainData['åŒ—äº¬'];
            const results = document.getElementById('screenResults');
            let html = `<h3 style="color: var(--neon-blue); margin-bottom: 20px; text-align: center;">${station} - åˆ—è½¦åŠ¨æ€</h3>`;
            html += '<div class="train-board">';
            
            mockTrains.forEach(train => {
                let statusText = '', statusClass = '';
                switch(train.status) {
                    case 'on-time': statusText = 'æ­£ç‚¹'; statusClass = 'on-time'; break;
                    case 'delayed': statusText = 'æ™šç‚¹'; statusClass = 'delayed'; break;
                    case 'cancelled': statusText = 'åœè¿'; statusClass = 'cancelled'; break;
                }
                
                html += `
                    <div class="board-item">
                        <div class="board-header">
                            <span class="train-number">${train.number}</span>
                            <span class="status ${statusClass}">${statusText}</span>
                        </div>
                        <div>ç›®çš„åœ°: ${train.destination}</div>
                        <div>å‘è½¦æ—¶é—´: ${train.time}</div>
                        <div>ç«™å°: ${train.platform}</div>
                    </div>
                `;
            });
            
            html += '</div>';
            results.innerHTML = html;
        }

        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(message, type = 'info') {
            const messageArea = document.getElementById('messageArea');
            messageArea.innerHTML = `<div class="message ${type}">${message}</div>`;
            
            if (type === 'error' || type === 'success') {
                setTimeout(() => {
                    messageArea.innerHTML = '';
                }, 5000);
            }
        }

        // è®¾ç½®æŒ‰é’®çŠ¶æ€
        function setButtonState(loading) {
            const searchBtn = document.getElementById('searchBtn');
            
            if (loading) {
                searchBtn.disabled = true;
                searchBtn.classList.add('btn-disabled');
                searchBtn.innerHTML = '<span class="loading"></span>æŸ¥è¯¢ä¸­...';
            } else {
                searchBtn.disabled = false;
                searchBtn.classList.remove('btn-disabled');
                searchBtn.innerHTML = 'æœç´¢è½¦ç¥¨';
            }
        }

        // æœç´¢è½¦ç¥¨
        function searchTickets() {
            const departure = document.getElementById('departure').value.trim();
            const destination = document.getElementById('destination').value.trim();
            const date = document.getElementById('depart-date').value;
            const ticketType = document.getElementById('ticket-type').value;
            
            if (!departure || !destination || !date) {
                showMessage('è¯·å¡«å†™å®Œæ•´çš„æœç´¢æ¡ä»¶', 'error');
                return;
            }
            
            setButtonState(true);
            
            // æ¨¡æ‹Ÿæœç´¢è¿‡ç¨‹
            setTimeout(() => {
                displayMockTickets(departure, destination, date, ticketType);
                setButtonState(false);
            }, 1500);
        }

        // æ˜¾ç¤ºæ¨¡æ‹Ÿè½¦ç¥¨æ•°æ®
        function displayMockTickets(departure, destination, date, type) {
            const ticketList = document.getElementById('ticketList');
            ticketList.innerHTML = '';
            
            const mockTickets = generateMockTickets(departure, destination, date, type);
            
            mockTickets.forEach(ticket => {
                const ticketCard = createTicketCard(ticket, type);
                ticketList.appendChild(ticketCard);
            });
        }

        // ç”Ÿæˆæ¨¡æ‹Ÿè½¦ç¥¨æ•°æ®
        function generateMockTickets(departure, destination, date, type) {
            const tickets = [];
            
            if (type === 'train') {
                tickets.push({
                    id: 'T001',
                    from: departure,
                    to: destination,
                    number: 'G123',
                    departureTime: '08:30',
                    arrivalTime: '13:45',
                    duration: '5å°æ—¶15åˆ†',
                    seatType: 'äºŒç­‰åº§',
                    price: '553',
                    remaining: 'å……è¶³'
                });
                
                tickets.push({
                    id: 'T002',
                    from: departure,
                    to: destination,
                    number: 'T109',
                    departureTime: '20:05',
                    arrivalTime: '09:25',
                    duration: '13å°æ—¶20åˆ†',
                    seatType: 'ç¡¬å§',
                    price: '298',
                    remaining: 'å……è¶³'
                });
            } else if (type === 'flight') {
                tickets.push({
                    id: 'F001',
                    from: departure,
                    to: destination,
                    number: 'CA1501',
                    departureTime: '10:20',
                    arrivalTime: '12:35',
                    duration: '2å°æ—¶15åˆ†',
                    seatType: 'ç»æµèˆ±',
                    price: '1240',
                    remaining: 'å……è¶³'
                });
            } else {
                tickets.push({
                    id: 'B001',
                    from: departure,
                    to: destination,
                    number: 'å®¢è¿å¤§å·´',
                    departureTime: '07:30',
                    arrivalTime: '12:00',
                    duration: '4å°æ—¶30åˆ†',
                    seatType: 'æ™®é€šåº§',
                    price: '156',
                    remaining: 'å……è¶³'
                });
            }
            
            return tickets;
        }

        // åˆ›å»ºè½¦ç¥¨å¡ç‰‡
        function createTicketCard(ticket, type) {
            const card = document.createElement('div');
            card.className = 'ticket-card';
            card.innerHTML = `
                <div class="ticket-header">
                    <div class="ticket-route">
                        <div class="route-station">${ticket.from}</div>
                        <div class="route-arrow">â†’</div>
                        <div class="route-station">${ticket.to}</div>
                    </div>
                    <div class="ticket-price">Â¥${ticket.price}</div>
                </div>
                
                <div class="ticket-details">
                    <div class="detail-item">
                        <span class="detail-label">è½¦æ¬¡/èˆªç­</span>
                        <span class="detail-value">${ticket.number}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">å‡ºå‘æ—¶é—´</span>
                        <span class="detail-value">${ticket.departureTime}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">åˆ°è¾¾æ—¶é—´</span>
                        <span class="detail-value">${ticket.arrivalTime}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">å†æ—¶</span>
                        <span class="detail-value">${ticket.duration}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">å¸­åˆ«/èˆ±ä½</span>
                        <span class="detail-value">${ticket.seatType}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">ä½™ç¥¨</span>
                        <span class="detail-value">${ticket.remaining}</span>
                    </div>
                </div>
                
                <div class="ticket-actions">
                    <button class="btn" onclick="selectSeat('${ticket.id}', '${type}')">é€‰æ‹©åº§ä½</button>
                    <button class="btn" onclick="bookTicket('${ticket.id}')">ç«‹å³é¢„è®¢</button>
                </div>
            `;
            
            return card;
        }

        // é€‰æ‹©åº§ä½
        function selectSeat(ticketId, vehicleType) {
            currentVehicleType = vehicleType;
            selectedSeat = null;
            
            const modal = document.getElementById('seatModal');
            const modalTitle = document.getElementById('modalTitle');
            const seatLayout = document.getElementById('seatLayout');
            
            modalTitle.textContent = `é€‰æ‹©åº§ä½ - ${getVehicleName(vehicleType)}`;
            
            // æ ¹æ®è½¦è¾†ç±»å‹ç”Ÿæˆä¸åŒçš„åº§ä½å¸ƒå±€
            if (vehicleType === 'flight') {
                generateAirplaneSeats(seatLayout);
            } else if (vehicleType === 'train') {
                generateTrainSeats(seatLayout);
            } else {
                generateBusSeats(seatLayout);
            }
            
            modal.style.display = 'block';
        }

        // è·å–è½¦è¾†ç±»å‹åç§°
        function getVehicleName(type) {
            switch(type) {
                case 'flight': return 'é£æœº';
                case 'train': return 'ç«è½¦';
                case 'bus': return 'æ±½è½¦';
                default: return 'è½¦è¾†';
            }
        }

        // ç”Ÿæˆé£æœºåº§ä½å¸ƒå±€
        function generateAirplaneSeats(container) {
            container.innerHTML = `
                <div class="airplane-layout">
                    <div class="airplane-body">
                        <div class="airplane-cockpit"></div>
                        <div class="airplane-tail"></div>
                        <div class="seats-container" id="seatsGrid">
                            ${generateAirplaneSeatGrid()}
                        </div>
                    </div>
                    <div style="color: var(--neon-blue); margin-top: 20px;">
                        <span style="display: inline-block; width: 20px; height: 20px; background: var(--neon-blue); margin-right: 10px;"></span>å¯é€‰
                        <span style="display: inline-block; width: 20px; height: 20px; background: #ff5555; margin: 0 10px;"></span>å·²é€‰
                        <span style="display: inline-block; width: 20px; height: 20px; background: #2a2a4a; border: 1px solid var(--neon-blue); margin-left: 10px;"></span>å¯é€‰
                    </div>
                </div>
            `;
            
            // æ·»åŠ åº§ä½ç‚¹å‡»äº‹ä»¶
            setTimeout(() => {
                const seats = document.querySelectorAll('.seat:not(.occupied)');
                seats.forEach(seat => {
                    seat.addEventListener('click', function() {
                        const seatNumber = this.getAttribute('data-seat');
                        selectThisSeat(seatNumber);
                    });
                });
            }, 100);
        }

        // ç”Ÿæˆé£æœºåº§ä½ç½‘æ ¼
        function generateAirplaneSeatGrid() {
            let html = '';
            const rows = 10;
            const occupiedSeats = ['1A', '3C', '5F', '7B', '9D'];
            
            for (let row = 1; row <= rows; row++) {
                html += `<div class="seat-row">`;
                
                // å·¦ä¾§åº§ä½ (A, B)
                html += `<div class="seat ${occupiedSeats.includes(row + 'A') ? 'occupied' : ''}" data-seat="${row}A">${row}A</div>`;
                html += `<div class="seat ${occupiedSeats.includes(row + 'B') ? 'occupied' : ''}" data-seat="${row}B">${row}B</div>`;
                
                // è¿‡é“
                if (row === 1) {
                    html += `<div class="aisle" rowspan="${rows}">è¿‡é“</div>`;
                }
                
                // å³ä¾§åº§ä½ (C, D, E, F)
                html += `<div class="seat ${occupiedSeats.includes(row + 'C') ? 'occupied' : ''}" data-seat="${row}C">${row}C</div>`;
                html += `<div class="seat ${occupiedSeats.includes(row + 'D') ? 'occupied' : ''}" data-seat="${row}D">${row}D</div>`;
                html += `<div class="seat ${occupiedSeats.includes(row + 'E') ? 'occupied' : ''}" data-seat="${row}E">${row}E</div>`;
                html += `<div class="seat ${occupiedSeats.includes(row + 'F') ? 'occupied' : ''}" data-seat="${row}F">${row}F</div>`;
                
                html += `</div>`;
            }
            
            return html;
        }

        // ç”Ÿæˆç«è½¦åº§ä½å¸ƒå±€
        function generateTrainSeats(container) {
            container.innerHTML = `
                <div class="train-layout">
                    <h4 style="color: var(--neon-pink); text-align: center; margin-bottom: 15px;">è½¦å¢åº§ä½åˆ†å¸ƒ</h4>
                    ${generateTrainCarriages()}
                    <div style="color: var(--neon-blue); margin-top: 20px; text-align: center;">
                        <span style="display: inline-block; width: 20px; height: 20px; background: var(--neon-blue); margin-right: 10px;"></span>å¯é€‰
                        <span style="display: inline-block; width: 20px; height: 20px; background: #2a2a4a; border: 1px solid var(--neon-blue); margin: 0 10px;"></span>å¯é€‰
                    </div>
                </div>
            `;
            
            setTimeout(() => {
                const seats = document.querySelectorAll('.train-seat');
                seats.forEach(seat => {
                    seat.addEventListener('click', function() {
                        const seatNumber = this.getAttribute('data-seat');
                        selectThisSeat(seatNumber);
                    });
                });
            }, 100);
        }

        // ç”Ÿæˆç«è½¦è½¦å¢
        function generateTrainCarriages() {
            let html = '';
            const carriages = 5;
            const occupiedSeats = ['1-05A', '2-08B', '3-12C', '4-03D'];
            
            for (let i = 1; i <= carriages; i++) {
                html += `<div class="train-carriage">`;
                html += `<div class="carriage-number">${i}å·è½¦å¢</div>`;
                html += `<div class="carriage-seats">`;
                
                for (let seatNum = 1; seatNum <= 40; seatNum++) {
                    const row = Math.ceil(seatNum / 4);
                    const col = String.fromCharCode(64 + ((seatNum - 1) % 4) + 1);
                    const seatId = `${i}-${row}${col}`;
                    const isOccupied = occupiedSeats.includes(seatId);
                    
                    html += `<div class="train-seat ${isOccupied ? 'occupied' : ''}" data-seat="${seatId}">${row}${col}</div>`;
                }
                
                html += `</div></div>`;
            }
            
            return html;
        }

        // ç”Ÿæˆæ±½è½¦åº§ä½å¸ƒå±€
        function generateBusSeats(container) {
            container.innerHTML = `
                <div class="bus-layout">
                    <div style="text-align: center;">
                        <div class="bus-driver">å¸æœº</div>
                    </div>
                    <div class="bus-seats">
                        ${generateBusSeatGrid()}
                    </div>
                    <div style="color: var(--neon-blue); margin-top: 20px; text-align: center;">
                        <span style="display: inline-block; width: 20px; height: 20px; background: var(--neon-blue); margin-right: 10px;"></span>å¯é€‰
                        <span style="display: inline-block; width: 20px; height: 20px; background: #2a2a4a; border: 1px solid var(--neon-blue); margin: 0 10px;"></span>å¯é€‰
                    </div>
                </div>
            `;
            
            setTimeout(() => {
                const seats = document.querySelectorAll('.bus-seat');
                seats.forEach(seat => {
                    seat.addEventListener('click', function() {
                        const seatNumber = this.getAttribute('data-seat');
                        selectThisSeat(seatNumber);
                    });
                });
            }, 100);
        }

        // ç”Ÿæˆæ±½è½¦åº§ä½ç½‘æ ¼
        function generateBusSeatGrid() {
            let html = '';
            const totalSeats = 20;
            const occupiedSeats = ['3', '8', '15', '19'];
            
            for (let i = 1; i <= totalSeats; i++) {
                const isOccupied = occupiedSeats.includes(i.toString());
                html += `<div class="bus-seat ${isOccupied ? 'occupied' : ''}" data-seat="${i}">${i}</div>`;
            }
            
            return html;
        }

        // é€‰æ‹©åº§ä½
        function selectThisSeat(seatNumber) {
            // å–æ¶ˆä¹‹å‰é€‰ä¸­çš„åº§ä½
            document.querySelectorAll('.seat.selected, .train-seat.selected, .bus-seat.selected').forEach(seat => {
                seat.classList.remove('selected');
            });
            
            // é€‰ä¸­æ–°åº§ä½
            const newSeat = document.querySelector(`[data-seat="${seatNumber}"]`);
            if (newSeat && !newSeat.classList.contains('occupied')) {
                newSeat.classList.add('selected');
                selectedSeat = seatNumber;
            }
        }

        // ç¡®è®¤é€‰åº§
        function confirmSeatSelection() {
            if (!selectedSeat) {
                showMessage('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªåº§ä½', 'error');
                return;
            }
            
            showMessage(`å·²æˆåŠŸé€‰æ‹©åº§ä½: ${selectedSeat}`, 'success');
            closeSeatModal();
        }

        // å…³é—­é€‰åº§æ¨¡æ€æ¡†
        function closeSeatModal() {
            document.getElementById('seatModal').style.display = 'none';
            selectedSeat = null;
        }

        // é¢„è®¢è½¦ç¥¨
        function bookTicket(ticketId) {
            showMessage('å¼€å§‹é¢„è®¢è½¦ç¥¨ï¼Œå°†è·³è½¬åˆ°æºç¨‹å•†æ—…å¹³å°', 'info');
        }

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('seatModal');
            if (event.target === modal) {
                closeSeatModal();
            }
        });
    </script>
</body>
</html>